<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <script src="../src/js/genpass.js"></script>
    <title>Password Generator API v1</title>
  </head>
  <body>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        try {
          let result;
          
          // Use make_password if available, otherwise create fallback
          if (typeof make_password === 'function') {
            result = make_password(32);
          } else {
            // Fallback password generation
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            result = '';
            for (let i = 0; i < 32; i++) {
              if ((i % 8 === 0) && (i !== 0)) {
                result += '-';
              }
              result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
          }
          
          // Output only the password as plain text
          document.body.textContent = result;
        } catch (error) {
          document.body.textContent = 'ERROR_GENERATION_FAILED';
          console.error('Password generation error:', error);
        }
      });
    </script>
  </body>
</html>
